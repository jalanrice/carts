pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--variables code

function _init()
 player={
   sp=1,
   x=59,
   y=59,
   w=8,
   h=8,
   flp=false,
   dx=0,
   dy=0,
   max_dx=2,
   max_dy=3,
   acc=0.5,anim=0,
   boost=4,
   anim=0,
   running=false,
   jumping=false,
   falling=false,
   sliding=false,
   landed=false
  }
  
  gravity=1.5
  friction=0.85
end


-->8
--update and draw
function _update()
  player.y+=gravity
end
function _draw()

  cls() 
  map(0,0)
  spr(player.sp,player.x,player.y,1,1,player.flp)
 end
-->8
--collisions

function collide_map(obj,aim,flag)
 --obj = table needs x,y,w,h
 --aim = left,right,up,down
 local x=obj.x  local y=obj.y
 local w=obj.w  local h=obj.h
 
 local x1=0  local y1=0
 local x2=0  local y2=0
 
 if aim=="left" then
   x1=-1  y1=y
   x2=x   y2=y+h-1
 elseif aim=="right" then
   x1=x+w   y1=y
   x2=x+w+1 y2=y+h-1
   
 elseif aim=="up" then
 x1=x+1    y1=y-1
 x2=x+w-1  y2=y
 elseif aim=="down" then
  x1=x       y1=y+h
  x2=x+w     y2=y+h
 end
 
 --pixels to tiles
x1/=8    y1/=8
x2/=8    y2/=8

if fget(mget(x1,y1), flag)
or fget(mget(x1,y2), flag)
or fget(mget(x2,y1), flag)
or fget(mget(x2,y2), flag) then
  return true
else
  return false
  end
  
end


__gfx__
00000000999999999999999999999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009aaaaaa99aaaaaa99a11a119000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007009a11a1199a11a1199a11a119000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770009a11a1199a11a1199aaaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770009aaaaaa99aaaaaa99a111119000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007009a1111199aaaaaa99a111119000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009a1111199a1111199aaaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999999999999999999999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb44444444bbbbbb3443bbbbbb644446444444444400000000000000000000000000000000444446446444464444444444
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb44644644bbbbbb3443bbbbbb449999444444445500000000000000000000000000000000444444444499994444444455
3bb33b33bbbb3b33bbbb3b333333333344444444bbbbb336633bbbbb499999944444454400000000000000000000000000000000446444444999999444444544
43344bb633bb4bb633bb4bb64444644646464444bbbb33444433bbbb499999945554444400000000000000000000000000000000444446444999999455544444
4444433444b34b3444bb4bb46444444444444444bbb3344444433bbb499999964445555500000000000000000000000000000000444444444999999644455555
4446444644364b46443b4bb64446446433333333bbb3646446463bbb499999944444444400000000000000000000000000000000444446444999999444444444
6444444464444344644b4bb444644644bbbbbbbbbb334444444433bb469999444445555500000000000000000000000000000000464446444699994444455555
4444464444444644444b4bb444444444bbbbbbbb3336446446446333644444645555445500000000000000000000000000000000444444446444446455554455
43bbbbbbbbbbbb340000003333000000000000009888888994444449008008000000000098888889988888890080080000000000000000000000000000000000
43bbbbbbbbbbbb340000003bb3000000000000008444444444444444444444480000000089999998899999988999999800000000000000000000000000000000
633bbbbbbbbbb3360000333bb3330000000000008444444444444444444444480000000089999998899999988999999800000000000000000000000000000000
4433bbbbbbbb334400033bbbbbb33000000000008444444444444444444444480000000089999998899999988999999800000000000000000000000000000000
44433bbbbbb334440033bbbbbbbb3300000000008444444444444444444444480000000089999998899999988999999800000000000000000000000000000000
46463bbbbbb36464033bbbbbbbbbb330000000008444444444444444444444480000000089999998899999988999999800000000000000000000000000000000
444433bbbb33444433bbbbbbbbbbbb33000000008444444444444444444444480000000089999998899999988999999800000000000000000000000000000000
46446333333644643bbbbbbbbbbbbbb3000000009888888900800800944444490000000098888889008008009888888900000000000000000000000000000000
98888889988888890080080000899800000000000089980098888889000000000000000000899800988888890000000000899800000000000089980000000000
89999998899999988999999800899800000000000089980044444440000000000000000000899800899999900000000000899800000000000089980000000000
89999998899999988999999800800800000000000080080044444448888888880000000000800800899999988888888888800888888888888880088800000000
89999998899999988999999800899800000000000084480044444440990440990000000000899800899999909909909999099099990990999909909900000000
89999998899999988999999800899800000000000084480044444440990440990000000000899800899999909909909999099099990990999908909900000000
89999998899999988999999800800800000000000080080044444444444444440000000000800800899999988888888888800888888008888888888800000000
89999998899999988999999800899800000000000089980044444440000000000000000000899800899999900000000000899800008998000000000000000000
98888889008008009888888900899800000000000089980048888889000000000000000000899800988888890000000000899800008998000000000000000000
00000000988888890000000098888889000000009888888900000000000000000000000098888889000000000000000000899800008998000000000000000000
00000000899999900000000009999998000000000444444800000000000000000000000009999998000000000000000000899800008998000000000000000000
00000000899999988888888889999998000000008444444800000000000000000000000089999998000000000000000088800800008008880000000000000000
00000000899999909909909909999998000000000444444800000000000000000000000009999998000000000000000099099800008990990000000000000000
00000000899999909909909909999998000000000444444800000000000000000000000009999998000000000000000099099800008990990000000000000000
00000000899999988888888889999998000000008444444800000000000000000000000089999998000000000000000088800800008008880000000000000000
00000000899999900000000009999998000000000444444800000000000000000000000009999998000000000000000000899800008998000000000000000000
00000000988888890000000098888889000000009444444900000000000000000000000098888889000000000000000000899800008998000000000000000000
__gff__
0001010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030303030303000000000000000000030300000001010100010101000000000101010000000100000001000000000000010001000100000001000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000069690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000069690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000059590000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000069690000595959605959590000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006969000000696b6b6b69000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000004040000000696b6b6b69000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000052530000006900000069000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000050510000006900000069000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000059590000005959005959000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000069690000006171727361000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000069690000006900690063000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000069690000006300690063000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000069690000006172727256000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000005251505300006355636063000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
404142434d4d4343414143404143414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4d4d4d4e4d4d4d4d4d4e4d4d4e4d4d4d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
